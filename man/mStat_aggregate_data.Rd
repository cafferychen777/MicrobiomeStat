% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mStat_aggregate_data.R
\name{mStat_aggregate_data}
\alias{mStat_aggregate_data}
\title{Aggregate Data by Subject}
\usage{
mStat_aggregate_data(
  data.obj,
  subject.var,
  strata.var = NULL,
  meta.handle.conflict = c("first", "stop", "summarise")
)
}
\arguments{
\item{data.obj}{A MicrobiomeStat data object, which is a list containing
at minimum the following components:
\itemize{
  \item \code{feature.tab}: A matrix of feature abundances (taxa/genes as
    rows, samples as columns)
  \item \code{meta.dat}: A data frame of sample metadata (samples as rows)
}
Optional components include:
\itemize{
  \item \code{feature.ann}: A matrix/data frame of feature annotations
    (e.g., taxonomy)
  \item \code{tree}: A phylogenetic tree object (class "phylo")
  \item \code{feature.agg.list}: Pre-aggregated feature tables by taxonomy
}
Data objects can be created using converters like
\code{\link{mStat_convert_phyloseq_to_data_obj}} or importers like
\code{\link{mStat_import_qiime2_as_data_obj}}.}

\item{subject.var}{Character string specifying the column name in meta.dat
that uniquely identifies each subject or sample unit. Required for
longitudinal and paired designs to track repeated measurements.}

\item{strata.var}{Character string specifying the column name in meta.dat
for stratification. When provided, analyses and visualizations will be
performed separately within each stratum (e.g., by site, batch, or sex).}

\item{meta.handle.conflict}{Character string specifying how to handle metadata conflicts:
\itemize{
  \item "first": Use first record (default)
  \item "stop": Error on conflicts
  \item "summarise": Mean for numeric, first for character/factor
}}
}
\value{
A MicrobiomeStat data object with aggregated data.
}
\description{
Aggregates feature counts and metadata by subject and optional strata.
}
\examples{
\dontrun{
# Prepare data for the function
data(peerj32.obj)

# Call the function with the default subject variable "subject"
aggregated_data <- mStat_aggregate_data(
  data.obj = peerj32.obj,
  subject.var = "subject",
  strata.var = NULL
)

# Example with a different subject variable name
# Let's pretend the subject ID column is called "participant"
# peerj32.obj$meta.dat$participant <- peerj32.obj$meta.dat$subject
# aggregated_data_2 <- mStat_aggregate_data(
#   data.obj = peerj32.obj,
#   subject.var = "participant",
#   strata.var = "group"
# )
}
}
